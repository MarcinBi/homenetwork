services:
  adguardhome:
    image: adguard/adguardhome:latest
    container_name: adguardhome
    restart: unless-stopped

    # No host port mappings required when using macvlan.
    expose:
      - "53/tcp"
      - "53/udp"
      - "80/tcp"
      - "443/tcp"
      - "3000/tcp"

    volumes:
      - "${ADGUARD_CONF_DIR}:/opt/adguardhome/conf"
      - "${ADGUARD_WORK_DIR}:/opt/adguardhome/work"

    networks:
      lan_macvlan:
        ipv4_address: ${ADGUARD_IPV4}

networks:
  lan_macvlan:
    external: true

