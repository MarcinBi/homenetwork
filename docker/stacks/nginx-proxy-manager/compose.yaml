services:
  nginx-proxy-manager:
    image: jc21/nginx-proxy-manager:latest
    container_name: npm
    restart: unless-stopped

    # NPM uses these internally; you don't need host port mappings when using macvlan.
    expose:
      - "80"
      - "81"
      - "443"

    environment:
      - NODE_ENV=production

    volumes:
      - ${NPM_DATA_DIR}:/data
      - ${NPM_LETSENCRYPT_DIR}:/etc/letsencrypt

    networks:
      lan_macvlan:
        ipv4_address: ${NPM_IPV4}

networks:
  lan_macvlan:
    external: true

